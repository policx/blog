






<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="renderer" content="webkit"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<meta name="format-detection" content="telephone=no, date=no, address=no, email=no"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
<meta http-equiv="Cache-Control" content="no-transform"/>
<meta http-equiv="Cache-Control" content="no-siteapp"/>

<meta name="generator" content="Hugo 0.79.0 with theme icarus"/>
<meta name="google-site-verification" content="Your googleVerification code"/>
<meta name="baidu-site-verification" content="Your baiduVerification code"/>

<meta name="author" content="æ±Ÿæ¹–"/>
<meta name="description" content="æœ¬æ–‡å¯¹åº” Demo ä»¥åŠ Markdown æ–‡ä»¶åœ¨ä»“åº“ä¸­ï¼Œæ–‡ä¸­çš„é”™è¯¯å¯ä»¥æ PR åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ”¹ã€‚ ç›®å½• é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹ GCD Glob"/>
<meta name="keywords" content=""/>

<title>é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹ - æ•°å­—äººç”Ÿ</title>


<meta name="application-name" content="æ•°å­—äººç”Ÿ" />
<meta name="msapplication-TileImage" content="img/favicon.svg" />

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="æ•°å­—äººç”Ÿ" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />






<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/blog.policx.com\/posts\/gcd-global\/"
    },
    "headline": "æ•°å­—äººç”Ÿ",
    "image": [],
    "dataPublished": "2017-09-06T19:30:00Z",
    "dataModified": "2017-09-06T19:30:00Z",
    "author": {
        "@type": "Person",
        "name": "æ±Ÿæ¹–"
    },
    "description": "æœ¬æ–‡å¯¹åº” Demo ä»¥åŠ Markdown æ–‡ä»¶åœ¨ä»“åº“ä¸­ï¼Œæ–‡ä¸­çš„é”™è¯¯å¯ä»¥æ PR åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ”¹ã€‚ ç›®å½• é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹ GCD Glob"
}
</script>


<link rel="canonical" href="https://blog.policx.com/posts/gcd-global/"/>
<link rel="alternate" href="https://blog.policx.com/index.xml" title="æ•°å­—äººç”Ÿ" type="application/rss+xml"/>
<link rel="icon" href="/img/favicon.svg"/>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-light.min.css"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source&#43;Code&#43;Pro"/>

<link rel="stylesheet" href="/css/default.css"/>


    
    
        
        
        
        

    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>


        
    

    
    
        
        
        
        



        
    

    
    

    
    

    
    
        
        
        
        

    <script type="text/javascript" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script>


        
    

    
    

    
    
        
        
        
        

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"/>


        
    

    
    

    
    

    
    

    
    

    
    
        
        
        
        



        
    

    
    
        
        
        
        

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"/>


        
    

    
    
        
        
        
        

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>


        
    

    
    

    
    
        
        
        
        



        
    

    
    




</head>
<body class="is-3-column">
<nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand justify-content-center">
            <a class="navbar-item navbar-logo" href="/">
                
                    <img src="/img/apple/logo.gif" alt="é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹" height="28">
                
            </a>
        </div>
        <div class="navbar-menu">
            <div class="navbar-start">
                
                
                    <a class="navbar-item "
                       href="/">ä¸»é¡µ</a>
                
                    <a class="navbar-item "
                       href="/archives">å½’æ¡£</a>
                
                    <a class="navbar-item "
                       href="/categories">åˆ†ç±»</a>
                
                    <a class="navbar-item "
                       href="/tags">æ ‡ç­¾</a>
                
                    <a class="navbar-item "
                       href="/about">å…³äº</a>
                
            </div>
            <div class="navbar-end">
                
                    
                
                
                    <a class="navbar-item is-hidden-tablet catalogue" title="ç›®å½•" href="javascript:;">
                        <i class="fas fa-list-ul"></i>
                    </a>
                
                
                    <a class="navbar-item search" title="æœç´¢" href="javascript:;">
                        <i class="fas fa-search"></i>
                    </a>
                
            </div>
        </div>
    </div>
</nav>

<section class="section">
    <div class="container">
        <div class="columns">
            <div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen">
                
    <div class="card">
    
    <article class="card-content article" role="article">
        
            <div class="article-meta is-size-7 is-uppercase level is-mobile">
                <div class="level-left">
                    
                        <span class="level-item">
                            <time dateTime="2017-09-06T19:30:00Z"
                                  title="2017-09-06T19:30:00Z">2017-09-06</time>å‘è¡¨
                        </span>
                    
                    
                        <span class="level-item">
                            <time dateTime="2017-09-06T19:30:00Z"
                                  title="2017-09-06T19:30:00Z">2017-09-06</time>æ›´æ–°
                        </span>
                    
                    
                    
                        <span class="level-item">
                            
                            <a class="link-muted" href="/categories/program">program</a>
                        </span>
                    
                    
                        <span class="level-item">6 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2921ä¸ªå­—)</span>
                    
                    
                        <span class="level-item" id="busuanzi_container_page_pv">
                            <span id="busuanzi_value_page_pv">0</span>æ¬¡è®¿é—®
                        </span>
                    
                </div>
            </div>
        
        <h1 class="title is-3 is-size-4-mobile">é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹</h1>
        <div class="content"><p>æœ¬æ–‡å¯¹åº” Demo ä»¥åŠ Markdown æ–‡ä»¶åœ¨<a href="https://github.com/ChenYilong/iOSBlog/tree/master/Tips/%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8GCD-Global%E9%98%9F%E5%88%97%E5%88%9B%E5%BB%BARunloop%E5%B8%B8%E9%A9%BB%E7%BA%BF%E7%A8%8B">ä»“åº“ä¸­</a>ï¼Œæ–‡ä¸­çš„é”™è¯¯å¯ä»¥æ PR åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ”¹ã€‚</p>
<hr>
<!-- more -->
<h2 id="ç›®å½•">ç›®å½•</h2>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<ul>
<li><a href="#%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8-gcd-global%E9%98%9F%E5%88%97%E5%88%9B%E5%BB%BArunloop%E5%B8%B8%E9%A9%BB%E7%BA%BF%E7%A8%8B">é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹</a>
<ul>
<li><a href="#gcd-global%E9%98%9F%E5%88%97%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E8%BF%9B%E8%A1%8C%E8%80%97%E6%97%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E9%A3%8E%E9%99%A9">GCD Globalé˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œçš„é£é™©</a></li>
<li><a href="#%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8-gcd-global-%E9%98%9F%E5%88%97%E5%88%9B%E5%BB%BA-runloop-%E5%B8%B8%E9%A9%BB%E7%BA%BF%E7%A8%8B">é¿å…ä½¿ç”¨ GCD Global é˜Ÿåˆ—åˆ›å»º Runloop å¸¸é©»çº¿ç¨‹</a>
<ul>
<li><a href="#%E5%8D%95%E4%B8%80-runloop-%E5%B8%B8%E9%A9%BB%E7%BA%BF%E7%A8%8B">å•ä¸€ Runloop å¸¸é©»çº¿ç¨‹</a></li>
<li><a href="#%E5%A4%9A%E4%B8%AA-runloop-%E5%B8%B8%E9%A9%BB%E7%BA%BF%E7%A8%8B">å¤šä¸ª Runloop å¸¸é©»çº¿ç¨‹</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="gcd-globalé˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œçš„é£é™©">GCD Globalé˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œçš„é£é™©</h2>
<p>å…ˆæ€è€ƒä¸‹å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>æ–°å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿå„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>dispatch_async å‡½æ•°åˆ†å‘åˆ°å…¨å±€é˜Ÿåˆ—ä¸€å®šä¼šæ–°å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ä¹ˆï¼Ÿ</li>
<li>å¦‚æœå…¨å±€é˜Ÿåˆ—å¯¹åº”çš„çº¿ç¨‹æ± å¦‚æœæ»¡äº†ï¼Œåç»­çš„æ´¾å‘çš„ä»»åŠ¡ä¼šæ€ä¹ˆå¤„ç½®ï¼Ÿæœ‰ä»€ä¹ˆé£é™©ï¼Ÿ</li>
</ul>
<p>ç­”æ¡ˆå¤§è‡´æ˜¯è¿™æ ·çš„ï¼šdispatch_async å‡½æ•°åˆ†å‘åˆ°å…¨å±€é˜Ÿåˆ—ä¸ä¸€å®šä¼šæ–°å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå…¨å±€é˜Ÿåˆ—åº•å±‚æœ‰ä¸€ä¸ªçš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± æ»¡äº†ï¼Œé‚£ä¹ˆåç»­çš„ä»»åŠ¡ä¼šè¢« block ä½ï¼Œç­‰å¾…å‰é¢çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹é•¿æ—¶é—´ä¸ç»“æŸï¼Œåç»­å †ç§¯çš„ä»»åŠ¡ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ­¤æ—¶å°±ä¼šå­˜åœ¨ APP crashçš„é£é™©ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dispatchTest1</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">NSInteger</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="mi">10000</span> <span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">^</span><span class="p">{</span>
            <span class="p">[</span><span class="nb">self</span> <span class="nl">dispatchTask</span><span class="p">:</span><span class="n">i</span><span class="p">];</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dispatchTask:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">index</span> <span class="p">{</span>
        <span class="c1">//æ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼Œæ¯”å¦‚DB,ç½‘ç»œï¼Œæ–‡ä»¶è¯»å†™ç­‰ç­‰
</span><span class="c1"></span>        <span class="n">sleep</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&#34;----:%ld&#34;</span><span class="p">,</span><span class="n">index</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šé€»è¾‘ç”¨çœŸæœºæµ‹è¯•ä¼šæœ‰å¡æ­»çš„å‡ ç‡ï¼Œå¹¶éæ¯æ¬¡éƒ½ä¼šå‘ç”Ÿï¼Œä½†å¤šå°è¯•å‡ æ¬¡å°±ä¼šå¤ç°ï¼Œä¼´éšå‰åå°åˆ‡æ¢ï¼Œcrashå‡ ç‡å¢å¤§ã€‚</p>
<p>ä¸‹é¢åšä¸€ä¸‹åˆ†æï¼š</p>
<p>å‚çœ‹ GCD æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¨å±€é˜Ÿåˆ—çš„ç›¸å…³æºç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="n">DISPATCH_NOINLINE</span>
<span class="k">static</span> <span class="kt">void</span>
<span class="nf">_dispatch_queue_wakeup_global_slow</span><span class="p">(</span><span class="n">dispatch_queue_t</span> <span class="n">dq</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">dispatch_root_queue_context_t</span> <span class="n">qc</span> <span class="o">=</span> <span class="n">dq</span><span class="o">-&gt;</span><span class="n">do_ctxt</span><span class="p">;</span>
   <span class="n">uint32_t</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">r</span><span class="p">;</span>

   <span class="n">_dispatch_debug_root_queue</span><span class="p">(</span><span class="n">dq</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
   <span class="n">dispatch_once_f</span><span class="p">(</span><span class="o">&amp;</span><span class="n">_dispatch_root_queues_pred</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>
           <span class="n">_dispatch_root_queues_init</span><span class="p">);</span>

<span class="cp">#if HAVE_PTHREAD_WORKQUEUES
</span><span class="cp">#if DISPATCH_USE_PTHREAD_POOL
</span><span class="cp"></span>   <span class="k">if</span> <span class="p">(</span><span class="n">qc</span><span class="o">-&gt;</span><span class="n">dgq_kworkqueue</span> <span class="o">!=</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)(</span><span class="o">~</span><span class="mi">0ul</span><span class="p">))</span>
<span class="cp">#endif
</span><span class="cp"></span>   <span class="p">{</span>
       <span class="n">_dispatch_root_queue_debug</span><span class="p">(</span><span class="s">&#34;requesting new worker thread for global &#34;</span>
               <span class="s">&#34;queue: %p&#34;</span><span class="p">,</span> <span class="n">dq</span><span class="p">);</span>
<span class="cp">#if DISPATCH_USE_LEGACY_WORKQUEUE_FALLBACK
</span><span class="cp"></span>       <span class="k">if</span> <span class="p">(</span><span class="n">qc</span><span class="o">-&gt;</span><span class="n">dgq_kworkqueue</span><span class="p">)</span> <span class="p">{</span>
           <span class="n">pthread_workitem_handle_t</span> <span class="n">wh</span><span class="p">;</span>
           <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gen_cnt</span><span class="p">;</span>
           <span class="k">do</span> <span class="p">{</span>
               <span class="n">r</span> <span class="o">=</span> <span class="n">pthread_workqueue_additem_np</span><span class="p">(</span><span class="n">qc</span><span class="o">-&gt;</span><span class="n">dgq_kworkqueue</span><span class="p">,</span>
                       <span class="n">_dispatch_worker_thread4</span><span class="p">,</span> <span class="n">dq</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">wh</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">gen_cnt</span><span class="p">);</span>
               <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">dispatch_assume_zero</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
           <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="n">i</span><span class="p">);</span>
           <span class="k">return</span><span class="p">;</span>
       <span class="p">}</span>
<span class="cp">#endif </span><span class="c1">// DISPATCH_USE_LEGACY_WORKQUEUE_FALLBACK
</span><span class="c1"></span><span class="cp">#if HAVE_PTHREAD_WORKQUEUE_SETDISPATCH_NP
</span><span class="cp"></span>       <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dq</span><span class="o">-&gt;</span><span class="n">dq_priority</span><span class="p">)</span> <span class="p">{</span>
           <span class="n">r</span> <span class="o">=</span> <span class="n">pthread_workqueue_addthreads_np</span><span class="p">(</span><span class="n">qc</span><span class="o">-&gt;</span><span class="n">dgq_wq_priority</span><span class="p">,</span>
                   <span class="n">qc</span><span class="o">-&gt;</span><span class="n">dgq_wq_options</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">i</span><span class="p">);</span>
           <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">dispatch_assume_zero</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
           <span class="k">return</span><span class="p">;</span>
       <span class="p">}</span>
<span class="cp">#endif
</span><span class="cp">#if HAVE_PTHREAD_WORKQUEUE_QOS
</span><span class="cp"></span>       <span class="n">r</span> <span class="o">=</span> <span class="n">_pthread_workqueue_addthreads</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">i</span><span class="p">,</span> <span class="n">dq</span><span class="o">-&gt;</span><span class="n">dq_priority</span><span class="p">);</span>
       <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">dispatch_assume_zero</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
<span class="cp">#endif
</span><span class="cp"></span>       <span class="k">return</span><span class="p">;</span>
   <span class="p">}</span>
<span class="cp">#endif </span><span class="c1">// HAVE_PTHREAD_WORKQUEUES
</span><span class="c1"></span><span class="cp">#if DISPATCH_USE_PTHREAD_POOL
</span><span class="cp"></span>   <span class="n">dispatch_pthread_root_queue_context_t</span> <span class="n">pqc</span> <span class="o">=</span> <span class="n">qc</span><span class="o">-&gt;</span><span class="n">dgq_ctxt</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">fastpath</span><span class="p">(</span><span class="n">pqc</span><span class="o">-&gt;</span><span class="n">dpq_thread_mediator</span><span class="p">.</span><span class="n">do_vtable</span><span class="p">))</span> <span class="p">{</span>
       <span class="k">while</span> <span class="p">(</span><span class="n">dispatch_semaphore_signal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pqc</span><span class="o">-&gt;</span><span class="n">dpq_thread_mediator</span><span class="p">))</span> <span class="p">{</span>
           <span class="k">if</span> <span class="p">(</span><span class="o">!--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
               <span class="k">return</span><span class="p">;</span>
           <span class="p">}</span>
       <span class="p">}</span>
   <span class="p">}</span>
   <span class="n">uint32_t</span> <span class="n">j</span><span class="p">,</span> <span class="n">t_count</span><span class="p">;</span>
   <span class="c1">// seq_cst with atomic store to tail &lt;rdar://problem/16932833&gt;
</span><span class="c1"></span>   <span class="n">t_count</span> <span class="o">=</span> <span class="n">dispatch_atomic_load2o</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">dgq_thread_pool_size</span><span class="p">,</span> <span class="n">seq_cst</span><span class="p">);</span>
   <span class="k">do</span> <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">t_count</span><span class="p">)</span> <span class="p">{</span>
           <span class="n">_dispatch_root_queue_debug</span><span class="p">(</span><span class="s">&#34;pthread pool is full for root queue: &#34;</span>
                   <span class="s">&#34;%p&#34;</span><span class="p">,</span> <span class="n">dq</span><span class="p">);</span>
           <span class="k">return</span><span class="p">;</span>
       <span class="p">}</span>
       <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">t_count</span> <span class="o">?</span> <span class="nl">t_count</span> <span class="p">:</span> <span class="n">i</span><span class="p">;</span>
   <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">dispatch_atomic_cmpxchgvw2o</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">dgq_thread_pool_size</span><span class="p">,</span> <span class="n">t_count</span><span class="p">,</span>
           <span class="n">t_count</span> <span class="o">-</span> <span class="n">j</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">t_count</span><span class="p">,</span> <span class="n">acquire</span><span class="p">));</span>

   <span class="n">pthread_attr_t</span> <span class="o">*</span><span class="n">attr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pqc</span><span class="o">-&gt;</span><span class="n">dpq_thread_attr</span><span class="p">;</span>
   <span class="n">pthread_t</span> <span class="n">tid</span><span class="p">,</span> <span class="o">*</span><span class="n">pthr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">tid</span><span class="p">;</span>
<span class="cp">#if DISPATCH_ENABLE_PTHREAD_ROOT_QUEUES
</span><span class="cp"></span>   <span class="k">if</span> <span class="p">(</span><span class="n">slowpath</span><span class="p">(</span><span class="n">dq</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">_dispatch_mgr_root_queue</span><span class="p">))</span> <span class="p">{</span>
       <span class="n">pthr</span> <span class="o">=</span> <span class="n">_dispatch_mgr_root_queue_init</span><span class="p">();</span>
   <span class="p">}</span>
<span class="cp">#endif
</span><span class="cp"></span>   <span class="k">do</span> <span class="p">{</span>
       <span class="n">_dispatch_retain</span><span class="p">(</span><span class="n">dq</span><span class="p">);</span>
       <span class="k">while</span> <span class="p">((</span><span class="n">r</span> <span class="o">=</span> <span class="n">pthread_create</span><span class="p">(</span><span class="n">pthr</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">_dispatch_worker_thread</span><span class="p">,</span> <span class="n">dq</span><span class="p">)))</span> <span class="p">{</span>
           <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">!=</span> <span class="n">EAGAIN</span><span class="p">)</span> <span class="p">{</span>
               <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">dispatch_assume_zero</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
           <span class="p">}</span>
           <span class="n">_dispatch_temporary_resource_shortage</span><span class="p">();</span>
       <span class="p">}</span>
   <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="n">j</span><span class="p">);</span>
<span class="cp">#endif </span><span class="c1">// DISPATCH_USE_PTHREAD_POOL
</span><span class="c1"></span><span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p>å¯¹äºæ‰§è¡Œçš„ä»»åŠ¡æ¥è¯´ï¼Œæ‰€æ‰§è¡Œçš„çº¿ç¨‹å…·ä½“æ˜¯å“ªä¸ªçº¿ç¨‹ï¼Œåˆ™æ˜¯é€šè¿‡ GCD çš„çº¿ç¨‹æ± ï¼ˆThread Poolï¼‰æ¥è¿›è¡Œè°ƒåº¦ï¼Œæ­£å¦‚<a href="https://www.objc.io/issues/2-concurrency/concurrency-apis-and-pitfalls/">Concurrent Programming: APIs and Challenges</a>æ–‡ç« é‡Œç»™çš„ç¤ºæ„å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNbRwly1fghg0f8vb6j30yw0k6wep.jpg" alt=""></p>
<p>ä¸Šé¢è´´çš„æºç ï¼Œæˆ‘ä»¬å…³æ³¨å¦‚ä¸‹çš„éƒ¨åˆ†ï¼š</p>
<p>å…¶ä¸­æœ‰ä¸€ä¸ªç”¨æ¥è®°å½•çº¿ç¨‹æ± å¤§å°çš„å­—æ®µ <code>dgq_thread_pool_size</code>ã€‚è¿™ä¸ªå­—æ®µæ ‡è®°ç€GCDçº¿ç¨‹æ± çš„å¤§å°ã€‚æ‘˜å½•ä¸Šé¢æºç çš„ä¸€éƒ¨åˆ†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="n">uint32_t</span> <span class="n">j</span><span class="p">,</span> <span class="n">t_count</span><span class="p">;</span>
  <span class="c1">// seq_cst with atomic store to tail &lt;rdar://problem/16932833&gt;
</span><span class="c1"></span>  <span class="n">t_count</span> <span class="o">=</span> <span class="n">dispatch_atomic_load2o</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">dgq_thread_pool_size</span><span class="p">,</span> <span class="n">seq_cst</span><span class="p">);</span>
  <span class="k">do</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">t_count</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">_dispatch_root_queue_debug</span><span class="p">(</span><span class="s">&#34;pthread pool is full for root queue: &#34;</span>
                  <span class="s">&#34;%p&#34;</span><span class="p">,</span> <span class="n">dq</span><span class="p">);</span>
          <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">t_count</span> <span class="o">?</span> <span class="nl">t_count</span> <span class="p">:</span> <span class="n">i</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">dispatch_atomic_cmpxchgvw2o</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">dgq_thread_pool_size</span><span class="p">,</span> <span class="n">t_count</span><span class="p">,</span>
          <span class="n">t_count</span> <span class="o">-</span> <span class="n">j</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">t_count</span><span class="p">,</span> <span class="n">acquire</span><span class="p">));</span>

</code></pre></td></tr></table>
</div>
</div><p>ä»æºç ä¸­æˆ‘ä»¬å¯ä»¥å¯¹åº”åˆ°<a href="https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW5">å®˜æ–¹æ–‡æ¡£ ï¼šGetting the Global Concurrent Dispatch Queues</a>é‡Œçš„è¯´æ³•ï¼š</p>
<blockquote>
<p>A concurrent dispatch queue is useful when you have multiple tasks that can run in parallel. A concurrent queue is still a queue in that it dequeues tasks in a first-in, first-out order; however, a concurrent queue may dequeue additional tasks before any previous tasks finish. The actual number of tasks executed by a concurrent queue at any given moment is variable and can change dynamically as conditions in your application change. Many factors affect the number of tasks executed by the concurrent queues, including the number of available cores, the amount of work being done by other processes, and the number and priority of tasks in other serial dispatch queues.</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<p>å…¨å±€é˜Ÿåˆ—çš„åº•å±‚æ˜¯ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå‘å…¨å±€é˜Ÿåˆ—ä¸­æäº¤çš„ blockï¼Œéƒ½ä¼šè¢«æ”¾åˆ°è¿™ä¸ªçº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œå¦‚æœçº¿ç¨‹æ± å·²æ»¡ï¼Œåç»­å†æäº¤ block å°±ä¸ä¼šå†é‡æ–°åˆ›å»ºçº¿ç¨‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Demo ä¼šé€ æˆå¡é¡¿ç”šè‡³å†»å±çš„åŸå› ã€‚</p>
<h2 id="é¿å…ä½¿ç”¨-gcd-global-é˜Ÿåˆ—åˆ›å»º-runloop-å¸¸é©»çº¿ç¨‹">é¿å…ä½¿ç”¨ GCD Global é˜Ÿåˆ—åˆ›å»º Runloop å¸¸é©»çº¿ç¨‹</h2>
<p>åœ¨åšç½‘è·¯è¯·æ±‚æ—¶æˆ‘ä»¬å¸¸å¸¸åˆ›å»ºä¸€ä¸ª Runloop å¸¸é©»çº¿ç¨‹ç”¨æ¥æ¥æ”¶ã€å“åº”åç»­çš„æœåŠ¡ç«¯å›æ‰§ï¼Œæ¯”å¦‚NSURLConnectionã€AFNetworkingç­‰ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ç§°è¿™ç§çº¿ç¨‹ä¸º Runloop å¸¸é©»çº¿ç¨‹ã€‚</p>
<p>æ­£å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œç”¨ GCD Global é˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œæ˜¯å­˜åœ¨é£é™©çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸‹ï¼Œå¦‚æœè¿™ä¸ªè€—æ—¶æ“ä½œå˜æˆäº† runloop å¸¸é©»çº¿ç¨‹ï¼Œä¼šæ˜¯ä»€ä¹ˆç»“æœï¼Ÿä¸‹é¢åšä¸€ä¸‹åˆ†æï¼š</p>
<p>å…ˆä»‹ç»ä¸‹ Runloop å¸¸é©»çº¿ç¨‹çš„åŸç†ï¼Œåœ¨å¼€å‘ä¸­ä¸€èˆ¬æœ‰ä¸¤ç§ç”¨æ³•ï¼š</p>
<ul>
<li>å•ä¸€ Runloop å¸¸é©»çº¿ç¨‹ï¼šåœ¨ APP çš„ç”Ÿå‘½å‘¨æœŸä¸­å¼€å¯äº†å”¯ä¸€çš„å¸¸é©»çº¿ç¨‹æ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œå¸¸ç”¨äºç½‘ç»œåº“ï¼Œæˆ–è€…æœ‰ç»´æŒé•¿è¿æ¥éœ€æ±‚çš„åº“ï¼Œæ¯”å¦‚ï¼š AFNetworking ã€ <a href="https://github.com/facebook/SocketRocket">SocketRocket</a>ã€‚</li>
<li>å¤šä¸ª Runloop å¸¸é©»çº¿ç¨‹ï¼šæ¯è¿›è¡Œä¸€æ¬¡ç½‘ç»œè¯·æ±‚å°±å¼€å¯ä¸€æ¡ Runloop å¸¸é©»çº¿ç¨‹ï¼Œè¿™æ¡çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸçš„èµ·ç‚¹æ˜¯ç½‘ç»œè¯·æ±‚å¼€å§‹ï¼Œç»ˆç‚¹æ˜¯ç½‘ç»œè¯·æ±‚ç»“æŸï¼Œæˆ–è€…ç½‘ç»œè¯·æ±‚è¶…æ—¶ã€‚</li>
</ul>
<h3 id="å•ä¸€-runloop-å¸¸é©»çº¿ç¨‹">å•ä¸€ Runloop å¸¸é©»çº¿ç¨‹</h3>
<p>å…ˆè¯´ç¬¬ä¸€ç§ç”¨æ³•ï¼š</p>
<p>ä»¥ AFNetworking ä¸ºä¾‹ï¼Œ<a href="https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking%2FAFURLConnectionOperation.m">AFURLConnectionOperation</a> è¿™ä¸ªç±»æ˜¯åŸºäº NSURLConnection æ„å»ºçš„ï¼Œå…¶å¸Œæœ›èƒ½åœ¨åå°çº¿ç¨‹æ¥æ”¶ Delegate å›è°ƒã€‚ä¸ºæ­¤ AFNetworking å•ç‹¬åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­å¯åŠ¨äº†ä¸€ä¸ª RunLoopï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-objective-c" data-lang="objective-c"><span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">networkRequestThreadEntryPoint:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">__unused</span> <span class="n">object</span> <span class="p">{</span>
    <span class="k">@autoreleasepool</span> <span class="p">{</span>
        <span class="p">[[</span><span class="n">NSThread</span> <span class="n">currentThread</span><span class="p">]</span> <span class="nl">setName</span><span class="p">:</span><span class="s">@&#34;AFNetworking&#34;</span><span class="p">];</span>
        <span class="n">NSRunLoop</span> <span class="o">*</span><span class="n">runLoop</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSRunLoop</span> <span class="n">currentRunLoop</span><span class="p">];</span>
        <span class="p">[</span><span class="n">runLoop</span> <span class="nl">addPort</span><span class="p">:[</span><span class="n">NSMachPort</span> <span class="n">port</span><span class="p">]</span> <span class="nl">forMode</span><span class="p">:</span><span class="n">NSDefaultRunLoopMode</span><span class="p">];</span>
        <span class="p">[</span><span class="n">runLoop</span> <span class="n">run</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="o">+</span> <span class="p">(</span><span class="n">NSThread</span> <span class="o">*</span><span class="p">)</span><span class="n">networkRequestThread</span> <span class="p">{</span>
    <span class="k">static</span> <span class="n">NSThread</span> <span class="o">*</span><span class="n">_networkRequestThread</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="k">static</span> <span class="n">dispatch_once_t</span> <span class="n">oncePredicate</span><span class="p">;</span>
    <span class="n">dispatch_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">oncePredicate</span><span class="p">,</span> <span class="o">^</span><span class="p">{</span>
        <span class="n">_networkRequestThread</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSThread</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTarget</span><span class="p">:</span><span class="nb">self</span> <span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">networkRequestThreadEntryPoint</span><span class="p">:)</span> <span class="nl">object</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
        <span class="p">[</span><span class="n">_networkRequestThread</span> <span class="n">start</span><span class="p">];</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="n">_networkRequestThread</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="å¤šä¸ª-runloop-å¸¸é©»çº¿ç¨‹">å¤šä¸ª Runloop å¸¸é©»çº¿ç¨‹</h3>
<p>ç¬¬äºŒç§ç”¨æ³•ï¼Œæˆ‘å†™äº†ä¸€ä¸ªå° Demo æ¥æ¨¡æ‹Ÿè¿™ç§åœºæ™¯ï¼Œ</p>
<p>æˆ‘ä»¬æ¨¡æ‹Ÿäº†ä¸€ä¸ªåœºæ™¯ï¼šå‡è®¾æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚å…¨éƒ¨è¶…æ—¶ï¼Œæˆ–è€…æœåŠ¡ç«¯æ ¹æœ¬ä¸å“åº”ï¼Œç„¶åç½‘ç»œåº“è¶…æ—¶æ£€æµ‹æœºåˆ¶çš„åšæ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-objective-c" data-lang="objective-c"><span class="cp">#import &#34;Foo.h&#34;
</span><span class="cp"></span>
<span class="k">@interface</span> <span class="nc">Foo</span><span class="p">()</span>  <span class="p">{</span>
    <span class="n">NSRunLoop</span> <span class="o">*</span><span class="n">_runloop</span><span class="p">;</span>
    <span class="n">NSTimer</span> <span class="o">*</span><span class="n">_timeoutTimer</span><span class="p">;</span>
    <span class="n">NSTimeInterval</span> <span class="n">_timeoutInterval</span><span class="p">;</span>
    <span class="n">dispatch_semaphore_t</span> <span class="n">_sem</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">Foo</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">instancetype</span><span class="p">)</span><span class="nf">init</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nb">self</span> <span class="o">=</span> <span class="p">[</span><span class="nb">super</span> <span class="n">init</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">_timeoutInterval</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span>
    <span class="n">_sem</span> <span class="o">=</span> <span class="n">dispatch_semaphore_create</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="c1">// Do any additional setup after loading the view, typically from a nib.
</span><span class="c1"></span>    <span class="k">return</span> <span class="nb">self</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">test</span> <span class="p">{</span>
    <span class="c1">// ç¬¬ä¸€ç§æ–¹å¼ï¼š
</span><span class="c1"></span>    <span class="c1">// NSThread *networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint0:) object:nil];
</span><span class="c1"></span>    <span class="c1">// [networkRequestThread start];
</span><span class="c1"></span>    <span class="c1">//ç¬¬äºŒç§æ–¹å¼:
</span><span class="c1"></span>    <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">^</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">[</span><span class="nb">self</span> <span class="nl">networkRequestThreadEntryPoint0</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
    <span class="p">});</span>
    <span class="n">dispatch_semaphore_wait</span><span class="p">(</span><span class="n">_sem</span><span class="p">,</span> <span class="n">DISPATCH_TIME_FOREVER</span><span class="p">);</span>
    <span class="k">return</span> <span class="l">@(</span><span class="nb">YES</span><span class="l">)</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">networkRequestThreadEntryPoint0:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">__unused</span> <span class="n">object</span> <span class="p">{</span>
    <span class="k">@autoreleasepool</span> <span class="p">{</span>
        <span class="p">[[</span><span class="n">NSThread</span> <span class="n">currentThread</span><span class="p">]</span> <span class="nl">setName</span><span class="p">:</span><span class="s">@&#34;CYLTest&#34;</span><span class="p">];</span>
        <span class="n">_runloop</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSRunLoop</span> <span class="n">currentRunLoop</span><span class="p">];</span>
        <span class="p">[</span><span class="n">_runloop</span> <span class="nl">addPort</span><span class="p">:[</span><span class="n">NSMachPort</span> <span class="n">port</span><span class="p">]</span> <span class="nl">forMode</span><span class="p">:</span><span class="n">NSDefaultRunLoopMode</span><span class="p">];</span>
        <span class="n">_timeoutTimer</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSTimer</span> <span class="nl">scheduledTimerWithTimeInterval</span><span class="p">:</span><span class="mi">1</span> <span class="nl">target</span><span class="p">:</span><span class="nb">self</span> <span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">stopLoop</span><span class="p">)</span> <span class="nl">userInfo</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">repeats</span><span class="p">:</span><span class="nb">NO</span><span class="p">];</span>
        <span class="p">[</span><span class="n">_runloop</span> <span class="nl">addTimer</span><span class="p">:</span><span class="n">_timeoutTimer</span> <span class="nl">forMode</span><span class="p">:</span><span class="n">NSRunLoopCommonModes</span><span class="p">];</span>
        <span class="p">[</span><span class="n">_runloop</span> <span class="n">run</span><span class="p">];</span><span class="c1">//åœ¨å®é™…å¼€å‘ä¸­æœ€å¥½ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç¡®ä¿èƒ½runloopé€€å‡ºï¼ŒåšåŒé‡çš„ä¿éšœ[runloop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:(timeoutInterval+5)]];
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">stopLoop</span> <span class="p">{</span>
    <span class="n">CFRunLoopStop</span><span class="p">([</span><span class="n">_runloop</span> <span class="n">getCFRunLoop</span><span class="p">]);</span>
    <span class="n">dispatch_semaphore_signal</span><span class="p">(</span><span class="n">_sem</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">@end</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-objective-c" data-lang="objective-c">   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="o">^</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">[[</span><span class="n">Foo</span> <span class="n">new</span><span class="p">]</span> <span class="n">test</span><span class="p">];</span>
            <span class="n">NSLog</span><span class="p">(</span><span class="s">@&#34;ğŸ”´ç±»åä¸æ–¹æ³•åï¼š%@ï¼ˆåœ¨ç¬¬%@è¡Œï¼‰ï¼Œæè¿°ï¼š%@&#34;</span><span class="p">,</span> <span class="l">@(</span><span class="n">__PRETTY_FUNCTION__</span><span class="l">)</span><span class="p">,</span> <span class="l">@(</span><span class="n">__LINE__</span><span class="l">)</span><span class="p">,</span> <span class="s">@&#34;&#34;</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šé€»è¾‘ç”¨çœŸæœºæµ‹è¯•ä¼šæœ‰å¡æ­»çš„å‡ ç‡ï¼Œå¹¶éæ¯æ¬¡éƒ½ä¼šå‘ç”Ÿï¼Œä½†å¤šå°è¯•å‡ æ¬¡å°±ä¼šå¤ç°ï¼Œä¼´éšå‰åå°åˆ‡æ¢ï¼Œcrashå‡ ç‡å¢å¤§ã€‚</p>
<p>å…¶ä¸­æˆ‘ä»¬é‡‡ç”¨äº† GCD å…¨å±€é˜Ÿåˆ—çš„æ–¹å¼æ¥åˆ›å»ºå¸¸é©»çº¿ç¨‹ï¼Œå› ä¸ºåœ¨åˆ›å»ºæ—¶å¯èƒ½å·²ç»å‡ºç°äº†å…¨å±€é˜Ÿåˆ—çš„çº¿ç¨‹æ± æ»¡äº†çš„æƒ…å†µï¼Œæ‰€ä»¥ GCD æ´¾å‘çš„ä»»åŠ¡ï¼Œæ— æ³•æ‰§è¡Œï¼Œè€Œä¸”æˆ‘ä»¬æŠŠè¶…æ—¶æ£€æµ‹çš„é€»è¾‘æ”¾è¿›äº†è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œæ‰€ä»¥å¯¼è‡´çš„æƒ…å†µå°±æ˜¯ï¼Œæœ‰å¾ˆå¤šä»»åŠ¡çš„è¶…æ—¶æ£€æµ‹åŠŸèƒ½å¤±æ•ˆäº†ã€‚æ­¤æ—¶å°±åªèƒ½ä¾èµ–äºæœåŠ¡ç«¯å“åº”æ¥ç»“æŸè¯¥ä»»åŠ¡ï¼ˆæœåŠ¡ç«¯å“åº”èƒ½ç»“æŸè¯¥ä»»åŠ¡çš„é€»è¾‘åœ¨ Demo ä¸­æœªç»™å‡ºï¼‰ï¼Œä½†æ˜¯å¦‚æœå†åŠ ä¹‹æœåŠ¡ç«¯ä¸å“åº”ï¼Œé‚£ä¹ˆä»»åŠ¡å°±æ°¸è¿œä¸ä¼šç»“æŸã€‚åç»­çš„ç½‘ç»œè¯·æ±‚ä¹Ÿä¼šå°±æ­¤ block ä½ï¼Œé€ æˆ crashã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æŠŠ GCD å…¨å±€é˜Ÿåˆ—æ¢æˆ NSThread çš„æ–¹å¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯æ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚</p>
<p>æ³¨æ„ï¼šæ–‡ç« ä¸­åªæ¼”ç¤ºçš„æ˜¯è¶…æ—¶ cancel runloop çš„æ“ä½œï¼Œå®é™…é¡¹ç›®ä¸­ä¸€å®šæœ‰å…¶ä»–ä¸»åŠ¨ cancel runloop çš„æ“ä½œï¼Œå°±æ¯”å¦‚ç½‘ç»œè¯·æ±‚æˆåŠŸæˆ–å¤±è´¥åéœ€è¦è¿›è¡Œcancelæ“ä½œã€‚ä»£ç ä¸­æ²¡æœ‰å±•ç¤ºç½‘ç»œè¯·æ±‚æˆåŠŸæˆ–å¤±è´¥åçš„ cancel æ“ä½œã€‚</p>
<p>Demo çš„è¿™ç§æ¨¡æ‹Ÿå¯èƒ½æ¯”è¾ƒæç«¯ï¼Œä½†æ˜¯å¦‚æœä½ ç»´æŠ¤çš„æ˜¯ä¸€ä¸ªåƒ AFNetworking è¿™æ ·çš„ä¸€ä¸ªç½‘ç»œåº“ï¼Œä½ ä¼šæ”¾å¿ƒæŠŠåˆ›å»ºå¸¸é©»çº¿ç¨‹è¿™æ ·çš„æ“ä½œäº¤ç»™ GCD å…¨å±€é˜Ÿåˆ—å—ï¼Ÿå› ä¸ºæ•´ä¸ª APP æ˜¯åœ¨å…±äº«ä¸€ä¸ªå…¨å±€é˜Ÿåˆ—çš„çº¿ç¨‹æ± ï¼Œé‚£ä¹ˆå¦‚æœ APP æŠŠçº¿ç¨‹æ± æ²¾æ»¡äº†ï¼Œç”šè‡³çº¿ç¨‹æ± é•¿æ—¶é—´å æ»¡ä¸”ä¸ç»“æŸï¼Œé‚£ä¹ˆ AFNetworking å°±è‡ªç„¶ä¸èƒ½å†æ‰§è¡Œä»»åŠ¡äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°ï¼Œå³ä½¿æ˜¯åªä¼šåˆ›å»ºä¸€æ¡å¸¸é©»çº¿ç¨‹ï¼Œ AFNetworking ä¾ç„¶é‡‡ç”¨äº† NSThread çš„æ–¹å¼è€Œé  GCD å…¨å±€é˜Ÿåˆ—è¿™ç§æ–¹å¼ã€‚</p>
<p>æ³¨é‡Šï¼šä»¥ä¸‹æ–¹æ³•å­˜åœ¨äºè€ç‰ˆæœ¬<a href="https://github.com/AFNetworking/AFNetworking/tree/2.x">AFN 2.x</a> ä¸­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-objective-c" data-lang="objective-c"><span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">networkRequestThreadEntryPoint:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">__unused</span> <span class="n">object</span> <span class="p">{</span>
    <span class="k">@autoreleasepool</span> <span class="p">{</span>
        <span class="p">[[</span><span class="n">NSThread</span> <span class="n">currentThread</span><span class="p">]</span> <span class="nl">setName</span><span class="p">:</span><span class="s">@&#34;AFNetworking&#34;</span><span class="p">];</span>
        <span class="n">NSRunLoop</span> <span class="o">*</span><span class="n">runLoop</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSRunLoop</span> <span class="n">currentRunLoop</span><span class="p">];</span>
        <span class="p">[</span><span class="n">runLoop</span> <span class="nl">addPort</span><span class="p">:[</span><span class="n">NSMachPort</span> <span class="n">port</span><span class="p">]</span> <span class="nl">forMode</span><span class="p">:</span><span class="n">NSDefaultRunLoopMode</span><span class="p">];</span>
        <span class="p">[</span><span class="n">runLoop</span> <span class="n">run</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="o">+</span> <span class="p">(</span><span class="n">NSThread</span> <span class="o">*</span><span class="p">)</span><span class="n">networkRequestThread</span> <span class="p">{</span>
    <span class="k">static</span> <span class="n">NSThread</span> <span class="o">*</span><span class="n">_networkRequestThread</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="k">static</span> <span class="n">dispatch_once_t</span> <span class="n">oncePredicate</span><span class="p">;</span>
    <span class="n">dispatch_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">oncePredicate</span><span class="p">,</span> <span class="o">^</span><span class="p">{</span>
        <span class="n">_networkRequestThread</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSThread</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTarget</span><span class="p">:</span><span class="nb">self</span> <span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">networkRequestThreadEntryPoint</span><span class="p">:)</span> <span class="nl">object</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
        <span class="p">[</span><span class="n">_networkRequestThread</span> <span class="n">start</span><span class="p">];</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="n">_networkRequestThread</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªåº“ä¼šç”¨ GCD å…¨å±€é˜Ÿåˆ—æ¥åˆ›å»ºå¸¸é©»çº¿ç¨‹ï¼Œè€Œä½ ä¹Ÿåº”è¯¥</p>
<blockquote>
<p>é¿å…ä½¿ç”¨ GCD Global é˜Ÿåˆ—æ¥åˆ›å»º Runloop å¸¸é©»çº¿ç¨‹ã€‚</p>
</blockquote>
<!-- æœ€åçš„é”™è¯¯ç¤ºä¾‹ï¼Œå¦‚æœå‘ç”Ÿåœ¨çº¿ä¸Šï¼Œå¦‚æœé­é‡æœåŠ¡ç«¯é¢‘ç¹ä¸å“åº”æˆ–è¶…æ—¶ï¼Œé‚£ä¹ˆå…­ä¸ƒä¸‡æ—¥æ´»APPï¼Œä¸‰å¤©èƒ½æœ‰åä¸ªå·¦å³crashã€‚150ä¸‡æ—¥æ´»APPï¼Œä¸€å‘¨60ä¸ªå·¦å³crashã€‚ -->
<hr>
<p>Posted by <a href="https://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a><br>
åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | <a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">Creative Commons BY-NC-ND 3.0</a></p>
<p align="center"><a href="https://weibo.com/u/1692391497?s=6uyXnP" target="_blank"><img border="0" src="https://service.t.sina.com.cn/widget/qmd/1692391497/b46c844b/1.png"/></a></a>
</div>
        
            <div class="article-licensing box">
    <div class="licensing-title">
        <p>é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹</p>
        <p><a href="https://blog.policx.com/posts/gcd-global/">https://blog.policx.com/posts/gcd-global/</a></p>
    </div>
    <div class="licensing-meta level is-mobile">
        <div class="level-left">
            
                <div class="level-item is-narrow">
                    <div>
                        <h6>ä½œè€…</h6>
                        <p>æ±Ÿæ¹–</p>
                    </div>
                </div>
            
            
                <div class="level-item is-narrow">
                    <div>
                        <h6>å‘å¸ƒäº</h6>
                        <p>2017-09-06</p>
                    </div>
                </div>
            
            
                <div class="level-item is-narrow">
                    <div>
                        <h6>æ›´æ–°äº</h6>
                        <p>2017-09-06</p>
                    </div>
                </div>
            
            <div class="level-item is-narrow">
                <div>
                    <h6>è®¸å¯åè®®</h6>
                    <p>
                        
                            <a class="" title="CC BY-NC 4.0" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">
                                CC BY-NC 4.0
                            </a>
                        
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

        
        
            <div class="article-tags size-small mb-4">
                <span class="mr-2">#</span><a class="link-muted mr-2" href="/tags/%ef%a3%bf" rel="tag">ï£¿</a></div>
        
        

    </article>
</div>


    <div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Ÿæ‰“èµä¸€ä¸‹ä½œè€…å§</h3>
        <div class="buttons is-centered">
            
                
                

    <a class="button donate" data-type="alipay">
        <span class="icon is-small">
            <i class="fab fa-alipay"></i>
        </span>
        <span>æ”¯ä»˜å®</span>
        <span class="qrcode">
            <img src="/img/donate/alipay.webp" alt="æ”¯ä»˜å®">
        </span>
    </a>


                
            
                
                

    <a class="button donate" data-type="wechat">
        <span class="icon is-small">
            <i class="fab fa-weixin"></i>
        </span>
        <span>å¾®ä¿¡</span>
        <span class="qrcode">
            <img src="/img/donate/wechat.webp" alt="å¾®ä¿¡">
        </span>
    </a>


                
            
        </div>
    </div>
</div>




    <nav class="post-navigation mt-4 level is-mobile">
        
            <div class="level-start">
                <a class="article-nav-prev level level-item link-muted" href="https://blog.policx.com/posts/bye/">
                    <i class="level-item fas fa-chevron-left"></i>
                    <span class="level-item">å‘Šåˆ«</span>
                </a>
            </div>
        
        
            <div class="level-end">
                <a class="article-nav-next level level-item link-muted" href="https://blog.policx.com/posts/%E5%96%84%E7%94%A8%E4%BD%B3%E8%BD%AF-%E9%A2%84%E8%A7%88/">
                    <span class="level-item">å–„ç”¨ä½³è½¯ é¢„è§ˆ</span>
                    <i class="level-item fas fa-chevron-right"></i>
                </a>
            </div>
        
    </nav>



    <div class="card">
    <div class="card-content">
        <h3 class="title is-5">è¯„è®º</h3>
        
        

    <div id="comment-container"></div>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.6.2/gitalk.min.css"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.6.2/gitalk.min.js"></script>
    <script>
        
        const gitalk = new Gitalk({
          id: "37f2b760882726e02db8a3fea2342ac0",
          repo: "talk",
          owner: "policx",
          clientID: "668d4c1dc3767af8dc3b",
          clientSecret: "f6b37398c2743c2a63752f7154e8d246ec17b9c0",
          admin: ["policx"],
          createIssueManually:  false ,
          distractionFreeMode:  false ,
          perPage:  10 ,
          pagerDirection: "last",enableHotKey:  true ,});
        gitalk.render('comment-container');
    </script>


        
    </div>
</div>




            </div>
            

    <div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 ">
        
            
            
                
                
<div class="card widget" data-type="profile">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered flex-shrink-1">
                <div>
                    <figure class="image is-128x128 mx-auto mb-2">
                        <img class="avatar is-rounded"
                             src="/img/avatar.png"
                             alt="é«˜è¿œ">
                    </figure>
                    <p class="title is-size-4 is-block" style="line-height: inherit">é«˜è¿œ</p>
                    <p class="is-size-6 is-block">åº™å ‚é«˜ï¼Œæ±Ÿæ¹–è¿œ</p>
                    
                        <p class="is-size-6 is-flex justify-content-center">
                            <i class="fas fa-map-marker-alt mr-1"></i>
                            <span>Sakhalin</span>
                        </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">æ–‡ç« </p>
                    <a href="/archives"><p class="title">76</p></a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">åˆ†ç±»</p>
                    <a href="/categories"><p class="title">5</p></a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">æ ‡ç­¾</p>
                    <a href="/tags"><p class="title">8</p></a>
                </div>
            </div>
        </nav>
        
            <div class="level">
                <a class="level-item button is-primary is-rounded" href="https://blog.policx.com/"
                   target="_blank" rel="noopener">å…³æ³¨æˆ‘</a>
            </div>
        
        <div class="level is-mobile">
            
                <a class="level-item button is-transparent is-marginless" title="Telegram" href="https://telegram.me/your_name"
                   target="_blank" rel="noopener">
                    <i class="fab fa-telegram"></i>
                </a>
            
                <a class="level-item button is-transparent is-marginless" title="Mail" href="mailto:heal@policx.com"
                   target="_blank" rel="noopener">
                    <i class="fas fa-envelope"></i>
                </a>
            
                <a class="level-item button is-transparent is-marginless" title="RSS" href="/index.xml"
                   target="_blank" rel="noopener">
                    <i class="fas fa-rss"></i>
                </a>
            
        </div>
    </div>
</div>

                
            
        
            
            
                
                
    <div class="card widget" id="toc" data-type="toc">
        <div class="card-content">
            <div class="menu">
                <h3 class="menu-label">ç›®å½•</h3>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#ç›®å½•">ç›®å½•</a></li>
    <li><a href="#gcd-globalé˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œçš„é£é™©">GCD Globalé˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œçš„é£é™©</a></li>
    <li><a href="#é¿å…ä½¿ç”¨-gcd-global-é˜Ÿåˆ—åˆ›å»º-runloop-å¸¸é©»çº¿ç¨‹">é¿å…ä½¿ç”¨ GCD Global é˜Ÿåˆ—åˆ›å»º Runloop å¸¸é©»çº¿ç¨‹</a>
      <ul>
        <li><a href="#å•ä¸€-runloop-å¸¸é©»çº¿ç¨‹">å•ä¸€ Runloop å¸¸é©»çº¿ç¨‹</a></li>
        <li><a href="#å¤šä¸ª-runloop-å¸¸é©»çº¿ç¨‹">å¤šä¸ª Runloop å¸¸é©»çº¿ç¨‹</a></li>
      </ul>
    </li>
  </ul>
</nav>
            </div>
        </div>
        <style>
        .menu-list > li > a.is-active + .menu-list {display: block;}
        .menu-list > li > a + .menu-list {display: none;}
        </style>
        <script type="text/javascript" src="/js/toc.js" defer></script>
    </div>


                
            
        
            
            
                
                <div class="card widget" data-type="categories">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">åˆ†ç±»</h3>
            <ul class="menu-list">
                
                    <li>
                        <a class="level is-mobile" href="/categories/news/">
                            <span class="level-start">
                                <span class="level-item">news</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">9</span>
                            </span>
                        </a>
                    </li>
                
                    <li>
                        <a class="level is-mobile" href="/categories/notes/">
                            <span class="level-start">
                                <span class="level-item">notes</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">23</span>
                            </span>
                        </a>
                    </li>
                
                    <li>
                        <a class="level is-mobile" href="/categories/program/">
                            <span class="level-start">
                                <span class="level-item">program</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">39</span>
                            </span>
                        </a>
                    </li>
                
                    <li>
                        <a class="level is-mobile" href="/categories/software/">
                            <span class="level-start">
                                <span class="level-item">software</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">2</span>
                            </span>
                        </a>
                    </li>
                
                    <li>
                        <a class="level is-mobile" href="/categories/wwdc/">
                            <span class="level-start">
                                <span class="level-item">wwdc</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">3</span>
                            </span>
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>


                
            
        
            
            
                
                <div class="card widget" data-type="tags">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">æ ‡ç­¾</h3>
            <div class="field is-grouped is-grouped-multiline">
                
                    <div class="control">
                        <a class="tags has-addons" href="/tags/django/">
                            <span class="tag">django</span>
                            <span class="tag">2</span>
                        </a>
                    </div>
                
                    <div class="control">
                        <a class="tags has-addons" href="/tags/git/">
                            <span class="tag">git</span>
                            <span class="tag">2</span>
                        </a>
                    </div>
                
                    <div class="control">
                        <a class="tags has-addons" href="/tags/linux/">
                            <span class="tag">linux</span>
                            <span class="tag">5</span>
                        </a>
                    </div>
                
                    <div class="control">
                        <a class="tags has-addons" href="/tags/markdown/">
                            <span class="tag">markdown</span>
                            <span class="tag">1</span>
                        </a>
                    </div>
                
                    <div class="control">
                        <a class="tags has-addons" href="/tags/program/">
                            <span class="tag">program</span>
                            <span class="tag">2</span>
                        </a>
                    </div>
                
                    <div class="control">
                        <a class="tags has-addons" href="/tags/python/">
                            <span class="tag">python</span>
                            <span class="tag">8</span>
                        </a>
                    </div>
                
                    <div class="control">
                        <a class="tags has-addons" href="/tags/wwdc/">
                            <span class="tag">wwdc</span>
                            <span class="tag">3</span>
                        </a>
                    </div>
                
                    <div class="control">
                        <a class="tags has-addons" href="/tags/%e5%96%84%e7%94%a8%e4%bd%b3%e8%bd%af/">
                            <span class="tag">å–„ç”¨ä½³è½¯</span>
                            <span class="tag">2</span>
                        </a>
                    </div>
                
            </div>
        </div>
    </div>
</div>


                
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
        
            <div class="column-right-shadow is-hidden-widescreen "></div>
        
    </div>


    <div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 ">
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
                
                
<div class="card widget" data-type="recent-posts">
    <div class="card-content">
        <h3 class="menu-label">æœ€æ–°æ–‡ç« </h3>
        
            <article class="media">
    
        <figure class="media-left">
            <a class="image" href="https://blog.policx.com/posts/2020/">
                <img src="/img/wwdc/2020.jpg" alt="WWDC 2020">
            </a>
        </figure>
    
    <div class="media-content">
        <p class="date"><time datetime='2020-06-23T11:06:39Z'>2020-06-23</time></p>
        <p class="title"><a href="https://blog.policx.com/posts/2020/">WWDC 2020</a></p>
        <p class="categories"><a href="/categories/wwdc">wwdc</a></p>
    </div>
</article>

        
            <article class="media">
    
        <figure class="media-left">
            <a class="image" href="https://blog.policx.com/posts/linuxdesktop/">
                <img src="https://oscimg.oschina.net/oscnet/04b04752c3797920f5466e7c8c16edb273c.jpg" alt="Linux æ¡Œé¢è¿›åŒ–å²">
            </a>
        </figure>
    
    <div class="media-content">
        <p class="date"><time datetime='2019-08-29T00:00:00Z'>2019-08-29</time></p>
        <p class="title"><a href="https://blog.policx.com/posts/linuxdesktop/">Linux æ¡Œé¢è¿›åŒ–å²</a></p>
        <p class="categories"><a href="/categories/program">program</a></p>
    </div>
</article>

        
            <article class="media">
    
        <figure class="media-left">
            <a class="image" href="https://blog.policx.com/posts/knowledge/">
                <img src="https://gitee.com/policx/im/raw/master/images/UX6DG4.jpg" alt="å…³äºçŸ¥è¯†äº§æƒã€çŸ¥è¯†å…±äº«ä¸æ–‡ç« ç¿»è¯‘">
            </a>
        </figure>
    
    <div class="media-content">
        <p class="date"><time datetime='2019-08-25T09:20:42Z'>2019-08-25</time></p>
        <p class="title"><a href="https://blog.policx.com/posts/knowledge/">å…³äºçŸ¥è¯†äº§æƒã€çŸ¥è¯†å…±äº«ä¸æ–‡ç« ç¿»è¯‘</a></p>
        <p class="categories"><a href="/categories/news">news</a></p>
    </div>
</article>

        
            <article class="media">
    
        <figure class="media-left">
            <a class="image" href="https://blog.policx.com/posts/2020dev/">
                <img src="https://gitee.com/policx/im/raw/master/images/ofYs51.jpg" alt="2020å¹´é¡¶çº§ç¼–ç¨‹è¯­è¨€çš„ç»Ÿè®¡æ•°æ®å’Œè°ƒæŸ¥ç»“æœå¦‚ä½•ï¼Ÿ">
            </a>
        </figure>
    
    <div class="media-content">
        <p class="date"><time datetime='2019-08-19T08:21:23Z'>2019-08-19</time></p>
        <p class="title"><a href="https://blog.policx.com/posts/2020dev/">2020å¹´é¡¶çº§ç¼–ç¨‹è¯­è¨€çš„ç»Ÿè®¡æ•°æ®å’Œè°ƒæŸ¥ç»“æœå¦‚ä½•ï¼Ÿ</a></p>
        <p class="categories"><a href="/categories/news">news</a></p>
    </div>
</article>

        
            <article class="media">
    
        <figure class="media-left">
            <a class="image" href="https://blog.policx.com/posts/five_a/">
                <img src="https://images.pexels.com/photos/7114/laptop-mobile.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;w=500" alt="Dice ç§°è¿™  5 ç§ç¼–ç¨‹è¯­è¨€æœªæ¥å¯èƒ½å„è‡ªæˆç‹">
            </a>
        </figure>
    
    <div class="media-content">
        <p class="date"><time datetime='2019-08-16T16:14:18Z'>2019-08-16</time></p>
        <p class="title"><a href="https://blog.policx.com/posts/five_a/">Dice ç§°è¿™  5 ç§ç¼–ç¨‹è¯­è¨€æœªæ¥å¯èƒ½å„è‡ªæˆç‹</a></p>
        <p class="categories"><a href="/categories/news">news</a></p>
    </div>
</article>

        
    </div>
</div>

                
            
        
            
            
                
                
<div class="card widget" data-type="archives">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">å½’æ¡£</h3>
            <ul class="menu-list">
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2020-06">
                            <span class="level-start">
                                <span class="level-item">2020å¹´ 6æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2019-08">
                            <span class="level-start">
                                <span class="level-item">2019å¹´ 8æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">5</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2019-07">
                            <span class="level-start">
                                <span class="level-item">2019å¹´ 7æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">9</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2019-06">
                            <span class="level-start">
                                <span class="level-item">2019å¹´ 6æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2018-09">
                            <span class="level-start">
                                <span class="level-item">2018å¹´ 9æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">2</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2018-06">
                            <span class="level-start">
                                <span class="level-item">2018å¹´ 6æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">3</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2018-05">
                            <span class="level-start">
                                <span class="level-item">2018å¹´ 5æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">3</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2018-04">
                            <span class="level-start">
                                <span class="level-item">2018å¹´ 4æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">2</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2018-03">
                            <span class="level-start">
                                <span class="level-item">2018å¹´ 3æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">3</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2018-02">
                            <span class="level-start">
                                <span class="level-item">2018å¹´ 2æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">4</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2018-01">
                            <span class="level-start">
                                <span class="level-item">2018å¹´ 1æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2017-09">
                            <span class="level-start">
                                <span class="level-item">2017å¹´ 9æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2017-07">
                            <span class="level-start">
                                <span class="level-item">2017å¹´ 7æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2017-03">
                            <span class="level-start">
                                <span class="level-item">2017å¹´ 3æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">2</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2017-02">
                            <span class="level-start">
                                <span class="level-item">2017å¹´ 2æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">2</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2016-12">
                            <span class="level-start">
                                <span class="level-item">2016å¹´ 12æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2016-10">
                            <span class="level-start">
                                <span class="level-item">2016å¹´ 10æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2016-08">
                            <span class="level-start">
                                <span class="level-item">2016å¹´ 8æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2016-06">
                            <span class="level-start">
                                <span class="level-item">2016å¹´ 6æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">12</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2016-03">
                            <span class="level-start">
                                <span class="level-item">2016å¹´ 3æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">3</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2016-02">
                            <span class="level-start">
                                <span class="level-item">2016å¹´ 2æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">2</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2016-01">
                            <span class="level-start">
                                <span class="level-item">2016å¹´ 1æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2015-12">
                            <span class="level-start">
                                <span class="level-item">2015å¹´ 12æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2015-09">
                            <span class="level-start">
                                <span class="level-item">2015å¹´ 9æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2015-06">
                            <span class="level-start">
                                <span class="level-item">2015å¹´ 6æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">2</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2014-11">
                            <span class="level-start">
                                <span class="level-item">2014å¹´ 11æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2014-09">
                            <span class="level-start">
                                <span class="level-item">2014å¹´ 9æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">3</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2014-08">
                            <span class="level-start">
                                <span class="level-item">2014å¹´ 8æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2014-06">
                            <span class="level-start">
                                <span class="level-item">2014å¹´ 6æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2014-05">
                            <span class="level-start">
                                <span class="level-item">2014å¹´ 5æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2014-03">
                            <span class="level-start">
                                <span class="level-item">2014å¹´ 3æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2013-07">
                            <span class="level-start">
                                <span class="level-item">2013å¹´ 7æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2012-12">
                            <span class="level-start">
                                <span class="level-item">2012å¹´ 12æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
                    
                    
                        
                    
                    <li>
                        <a class="level is-mobile" href="/archives/#2011-11">
                            <span class="level-start">
                                <span class="level-item">2011å¹´ 11æœˆ</span>
                            </span>
                            <span class="level-end">
                                <span class="level-item tag">1</span>
                            </span>
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

                
            
        
            
            
                
                
<div class="card widget" data-type="links">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">é“¾æ¥</h3>
            <ul class="menu-list">
                
                    <li>
                        <a class="level is-mobile" href="https://gohugo.io" target="_blank" rel="noopener">
                            <span class="level-left"><span class="level-item">Hugo</span></span>
                            <span class="level-right">
                                <span class="level-item tag">
                                    gohugo.io
                                </span>
                            </span>
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

                
            
        
            
            
                
                
<div class="card widget" data-type="subscribe-email">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">è®¢é˜…æ›´æ–°</h3>
            <form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow"
                  onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=','popupwindow','scrollbars=yes,width=550,height=520');return true">
                <input type="hidden" value="" name="uri">
                <input type="hidden" name="loc" value="en_US">
                <div class="field has-addons">
                    <div class="control has-icons-left is-expanded">
                        <input class="input" name="email" type="email" placeholder="Email">
                        <span class="icon is-small is-left"><i class="fas fa-envelope"></i></span>
                    </div>
                    <div class="control"><input class="button" type="submit" value="è®¢é˜…"></div>
                </div>
                <p class="help">Powered by Google feedburner</p>
            </form>
        </div>
    </div>
</div>

                
            
        
            
            
                
                
<div class="card widget" data-type="adsense">
    <div class="card-content">
        
            <div class="notification is-danger">You need to set <code>client_id</code> and
                <code>slot_id</code> to show this AD unit. Please set it in <code>config.yaml</code>.
            </div>
        
    </div>
</div>

                
            
        
    </div>


        </div>
    </div>
</section>
<footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start">
                <a class="footer-logo is-block mb-2" href="/">
                    
                        <img src="/img/apple/logo.gif" alt="DDoSï¼ˆåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼‰æ”»å‡»æ˜¯æ— è§£çš„å—ï¼Ÿ" height="28">
                    
                </a>
                <p class="is-size-7">
                    <span>&copy; 2020 æ±Ÿæ¹–</span>&nbsp;&nbsp;Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>&nbsp;&&nbsp;<a href="https://github.com/iMaple/hugo-theme-icarus/" target="_blank" rel="noopener">Icarus</a>
                    
                        <br/>
                        <span id="busuanzi_container_site_uv">å…±<span id="busuanzi_value_site_uv">0</span>ä¸ªè®¿å®¢</span>
                    
                </p>
            </div>
            <div class="level-end">
                <div class="field has-addons">
                    
                        <p class="control">
                            <a class="button is-transparent is-large" title="Creative Commons" href="https://creativecommons.org/" target="_blank" rel="noopener">
                                <i class="fab fa-creative-commons"></i>
                            </a>
                        </p>
                    
                </div>
            </div>
        </div>
    </div>
</footer>



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.26.0/moment-with-locales.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
<script>moment.locale("zh-cn");</script>

<script>
    var IcarusThemeSettings = {
      article: {
        highlight: {
          clipboard:  true ,
          fold: "unfolded"
        }
      },
      toc: {
        index:  true 
      }
    };
</script>

<script type="text/javascript" src="/js/column.js"></script>


    
    
        
        
        
        

    <script type="text/javascript" src="/js/animation.js"></script>


        
    

    
    
        
        
        
        

    <a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;">
        <i class="fas fa-chevron-up"></i>
    </a>
    <script type="text/javascript" src="/js/back2top.js" defer></script>


        
    

    
    

    
    

    
    
        
        
        
        



        
    

    
    

    
    
        
        
        
        

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script>
    <script>
    window.addEventListener('load', () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static:  false ,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: '#edeff5',
            text: '#838391'
          },
          button: {
            background: '#4b81e8'
          },
        },
      });
    });
    </script>


        
    

    
    

    
    

    
    

    
    

    
    
        
        
        
        

    <script type="text/x-mathjax-config;executed=true">
    MathJax.Hub.Config({
      'HTML-CSS': {matchFontHeight: false},
      SVG: {matchFontHeight: false},
      CommonHTML: {matchFontHeight: false},
      tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
    });
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>


        
    

    
    
        
        
        
        

    <div id="outdated">
        <h6>Your browser is out-of-date!</h6>
        <p>Update your browser to view this website correctly.&nbsp;
            <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a>
        </p>
        <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">Ã—</a></p>
    </div>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js" defer></script>
    <script>
        window.addEventListener('load', function () {
          outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'object-fit'
          });
        });
    </script>


        
    

    
    
        
        
        
        



        
    

    
    

    
    
        
        
        
        

    <script src="https://cdnjs.cloudflare.com/ajax/libs/smoothscroll/1.4.10/SmoothScroll.min.js" async></script>


        
    

    
    


<script type="text/javascript" src="/js/main.js" defer></script>


    
    <div class="searchbox">
    <div class="searchbox-container">
        <div class="searchbox-header">
            <div class="searchbox-input-container">
                <input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."/>
            </div>
            <a class="searchbox-close" href="javascript:;">Ã—</a>
        </div>
        <div class="searchbox-body"></div>
    </div>
</div>
<script type="text/javascript" src="/js/insight.js" defer></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
      loadInsight(
        {contentUrl: '/index.json'},
        {
          hint: "æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...",
          untitled: "(æ— æ ‡é¢˜)",
          posts: "æ–‡ç« ",
          pages: "é¡µé¢",
          categories: "åˆ†ç±»",
          tags: "æ ‡ç­¾"
        }
      );
    });
</script>

    


</body>
</html>
